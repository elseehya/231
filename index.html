<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEOM: The Future of Saudi Arabia</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #000033;
            color: #ffffff;
            overflow-x: hidden;
        }
        .container {
            width: 1100%;
            height: 100vh;
            display: flex;
            transition: transform 0.5s ease;
        }
        .section {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        .chart-container {
            width: 80%;
            height: 70%;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        .chart-gallery {
            display: flex;
            transition: transform 0.5s ease;
        }
        .chart {
            min-width: 100%;
            height: 100%;
        }
        .nav-buttons {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            z-index: 1000;
        }
        .nav-button {
            background-color: #00ffff;
            color: #000033;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            background-color: #ffffff;
            transform: scale(1.1);
        }
        .particle {
            position: absolute;
            background-color: #00ffff;
            border-radius: 50%;
            pointer-events: none;
        }
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: #ffffff;
            border-radius: 50%;
        }
        .poster {
            width: 80%;
            height: 70%;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .poster-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        .poster-content {
            font-size: 16px;
            line-height: 1.5;
            text-align: justify;
        }
        .poster-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: #ffffff;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .quiz-container {
            width: 80%;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
        }
        .quiz-question {
            font-size: 18px;
            margin-bottom: 20px;
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
        }
        .quiz-option {
            background-color: #00ffff;
            color: #000033;
            border: none;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .quiz-option:hover {
            background-color: #ffffff;
        }
        .timeline {
            width: 80%;
            height: 100px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        .timeline-event {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #00ffff;
            border-radius: 50%;
            cursor: pointer;
        }
        .timeline-tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: #ffffff;
            padding: 5px;
            border-radius: 3px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #00ffff;
            color: #000033;
            border: none;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
        }
        .dark-mode {
            background-color: #ffffff;
            color: #000033;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        <div class="section" id="intro">
            <h1>NEOM: Shaping the Future of Saudi Arabia</h1>
            <p>Explore the ambitious mega-project transforming the Kingdom's economy</p>
        </div>
        <div class="section">
            <h2>Saudi vs Malaysia Projects</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="saudi-malaysia-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>NEOM vs UAE Projects</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="neom-uae-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Investment Timeline</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="investment-timeline-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Job Creation Forecast</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="job-creation-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Tourism Growth</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="tourism-growth-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Renewable Energy Adoption</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="renewable-energy-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Foreign Direct Investment</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="fdi-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Economic Diversification</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="diversification-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>NEOM vs Other Megaprojects</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="megaprojects-comparison-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Smart City Index</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="smart-city-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>NEOM Regions Comparison</h2>
            <div class="chart-container">
                <div class="chart-gallery">
                    <div class="chart" id="neom-regions-chart"></div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Economic Challenges of NEOM</h2>
            <div class="poster">
                <div class="poster-title">Financial Sustainability</div>
                <div class="poster-image" style="background-image: url('neom_financial.jpg');"></div>
                <div class="poster-content">
                    NEOM's ambitious scale raises questions about its long-term financial viability. With an estimated cost of $500 billion, the project faces challenges in securing consistent funding and generating sufficient returns to justify the massive investment.
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Political Scheme</h2>
            <div class="poster">
                <div class="poster-title">Geopolitical Implications</div>
                <div class="poster-image" style="background-image: url('neom_political.jpg');"></div>
                <div class="poster-content">
                    NEOM's strategic location near the borders of Egypt, Israel, and Jordan introduces complex geopolitical considerations. The project's success may depend on delicate diplomatic relations and regional stability.
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Environmental Concerns</h2>
            <div class="poster">
                <div class="poster-title">Ecological Impact</div>
                <div class="poster-image" style="background-image: url('neom_environment.jpg');"></div>
                <div class="poster-content">
                    Despite NEOM's commitment to sustainability, the massive scale of construction and development poses significant risks to the local ecosystem. Balancing progress with environmental preservation remains a critical challenge.
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Social Integration</h2>
            <div class="poster">
                <div class="poster-title">Cultural Adaptation</div>
                <div class="poster-image" style="background-image: url('neom_social.jpg');"></div>
                <div class="poster-content">
                    NEOM's vision of a futuristic, liberal enclave within Saudi Arabia raises questions about social integration and cultural clash. Balancing traditional values with the project's progressive aims presents a unique societal challenge.
                </div>
            </div>
        </div>
        <div class="section">
            <h2>Test Your Knowledge</h2>
            <div class="quiz-container">
                <div class="quiz-question" id="quiz-question"></div>
                <div class="quiz-options" id="quiz-options"></div>
            </div>
        </div>
        <div class="section">
            <h2>NEOM Timeline</h2>
            <div class="timeline" id="neom-timeline"></div>
        </div>
    </div>

    <div class="nav-buttons">
        <button class="nav-button" onclick="navigate(-1)">Previous</button>
        <button class="nav-button" onclick="navigate(1)">Next</button>
    </div>

    <button class="mode-toggle" onclick="toggleMode()">ðŸŒ“</button>

    <div class="tooltip" id="tooltip"></div>

    <script>
        let currentSection = 0;
        const totalSections = document.querySelectorAll('.section').length;

        function navigate(direction) {
            currentSection += direction;
            if (currentSection < 0) currentSection = 0;
            if (currentSection >= totalSections) currentSection = totalSections - 1;

            const container = document.getElementById('main-container');
            container.style.transform = `translateX(-${currentSection * 100}vw)`;
        }

        function createParticles() {
            const particleCount = 50;
            const container = document.body;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.top = `${Math.random() * 100}vh`;
                particle.style.width = `${Math.random() * 5 + 1}px`;
                particle.style.height = particle.style.width;
                container.appendChild(particle);

                animateParticle(particle);
            }
        }

        function animateParticle(particle) {
            gsap.to(particle, {
                x: `random(-50, 50, 5)`,
                y: `random(-50, 50, 5)`,
                duration: `random(3, 5)`,
                repeat: -1,
                yoyo: true,
                ease: 'none'
            });
        }

        function createShootingStars() {
            setInterval(() => {
                const star = document.createElement('div');
                star.classList.add('shooting-star');
                star.style.left = `${Math.random() * 100}vw`;
                star.style.top = '0';
                document.body.appendChild(star);

                gsap.to(star, {
                    x: `random(-300, 300)`,
                    y: '100vh',
                    duration: 1,
                    ease: 'power1.in',
                    onComplete: () => star.remove()
                });
            }, 3000);
        }

        function createChart(id, type, data, options) {
            const svg = d3.select(`#${id}`)
                                .append('svg')
                .attr('width', '100%')
                .attr('height', '100%');

            switch (type) {
                case 'bar':
                    createBarChart(svg, data, options);
                    break;
                case 'line':
                    createLineChart(svg, data, options);
                    break;
                case 'pie':
                    createPieChart(svg, data, options);
                    break;
                case 'radar':
                    createRadarChart(svg, data, options);
                    break;
                case 'stacked':
                    createStackedAreaChart(svg, data, options);
                    break;
            }
        }

        function createBarChart(svg, data, options) {
            const margin = {top: 20, right: 30, bottom: 40, left: 60};
            const width = svg.node().getBoundingClientRect().width - margin.left - margin.right;
            const height = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;

            const x = d3.scaleBand()
                .range([0, width])
                .padding(0.1);

            const y = d3.scaleLinear()
                .range([height, 0]);

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            x.domain(data.map(d => d.label));
            y.domain([0, d3.max(data, d => d.value)]);

            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll("text")
                .attr("transform", "rotate(-45)")
                .style("text-anchor", "end");

            g.append("g")
                .call(d3.axisLeft(y));

            g.selectAll(".bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", d => x(d.label))
                .attr("y", d => y(d.value))
                .attr("width", x.bandwidth())
                .attr("height", d => height - y(d.value))
                .attr("fill", options.color || "#00ffff")
                .on("mouseover", function(event, d) {
                    showTooltip(event, `${d.label}: ${d.value}`);
                })
                .on("mouseout", hideTooltip);

            // Add chart title
            svg.append("text")
                .attr("x", width / 2 + margin.left)
                .attr("y", margin.top / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("fill", "#ffffff")
                .text(options.title);

            // Add animations
            g.selectAll(".bar")
                .attr("y", height)
                .attr("height", 0)
                .transition()
                .duration(1000)
                .attr("y", d => y(d.value))
                .attr("height", d => height - y(d.value));
        }

        function createLineChart(svg, data, options) {
            const margin = {top: 20, right: 30, bottom: 40, left: 60};
            const width = svg.node().getBoundingClientRect().width - margin.left - margin.right;
            const height = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;

            const x = d3.scaleTime()
                .range([0, width]);

            const y = d3.scaleLinear()
                .range([height, 0]);

            const line = d3.line()
                .x(d => x(d.date))
                .y(d => y(d.value));

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            x.domain(d3.extent(data, d => d.date));
            y.domain([0, d3.max(data, d => d.value)]);

            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x));

            g.append("g")
                .call(d3.axisLeft(y));

            g.append("path")
                .datum(data)
                .attr("fill", "none")
                .attr("stroke", options.color || "#00ffff")
                .attr("stroke-width", 2)
                .attr("d", line);

            // Add data points
            g.selectAll(".dot")
                .data(data)
                .enter().append("circle")
                .attr("class", "dot")
                .attr("cx", d => x(d.date))
                .attr("cy", d => y(d.value))
                .attr("r", 4)
                .attr("fill", options.color || "#00ffff")
                .on("mouseover", function(event, d) {
                    showTooltip(event, `${d.date.toDateString()}: ${d.value}`);
                })
                .on("mouseout", hideTooltip);

            // Add chart title
            svg.append("text")
                .attr("x", width / 2 + margin.left)
                .attr("y", margin.top / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("fill", "#ffffff")
                .text(options.title);

            // Add animations
            const pathLength = g.select("path").node().getTotalLength();

            g.select("path")
                .attr("stroke-dasharray", pathLength + " " + pathLength)
                .attr("stroke-dashoffset", pathLength)
                .transition()
                .duration(2000)
                .attr("stroke-dashoffset", 0);

            g.selectAll(".dot")
                .attr("opacity", 0)
                .transition()
                .delay((d, i) => i * 100)
                .duration(500)
                .attr("opacity", 1);
        }

        function createPieChart(svg, data, options) {
            const width = svg.node().getBoundingClientRect().width;
            const height = svg.node().getBoundingClientRect().height;
            const radius = Math.min(width, height) / 2;

            const g = svg.append("g")
                .attr("transform", `translate(${width / 2},${height / 2})`);

            const color = d3.scaleOrdinal(d3.schemeCategory10);

            const pie = d3.pie()
                .value(d => d.value);

            const path = d3.arc()
                .outerRadius(radius - 10)
                .innerRadius(0);

            const arc = g.selectAll(".arc")
                .data(pie(data))
                .enter().append("g")
                .attr("class", "arc");

            arc.append("path")
                .attr("d", path)
                .attr("fill", (d, i) => color(i))
                .on("mouseover", function(event, d) {
                    showTooltip(event, `${d.data.label}: ${d.data.value}`);
                })
                .on("mouseout", hideTooltip);

            arc.append("text")
                .attr("transform", d => `translate(${path.centroid(d)})`)
                .attr("dy", "0.35em")
                .text(d => d.data.label)
                .style("text-anchor", "middle")
                .style("fill", "#ffffff")
                .style("font-size", "12px");

            // Add chart title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", 20)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("fill", "#ffffff")
                .text(options.title);

            // Add animations
            arc.select("path")
                .transition()
                .duration(1000)
                .attrTween("d", function(d) {
                    const interpolate = d3.interpolate({startAngle: 0, endAngle: 0}, d);
                    return function(t) {
                        return path(interpolate(t));
                    };
                });
        }

        function createRadarChart(svg, data, options) {
            const width = svg.node().getBoundingClientRect().width;
            const height = svg.node().getBoundingClientRect().height;
            const radius = Math.min(width, height) / 2;

            const g = svg.append("g")
                .attr("transform", `translate(${width / 2},${height / 2})`);

            const angleSlice = Math.PI * 2 / data[0].axes.length;

            const rScale = d3.scaleLinear()
                .range([0, radius])
                .domain([0, d3.max(data, d => d3.max(d.axes, a => a.value))]);

            // Draw the background circles
            const axisGrid = g.selectAll(".levels")
                .data(d3.range(1, 6).reverse())
                .enter()
                .append("circle")
                .attr("class", "gridCircle")
                .attr("r", d => radius / 5 * d)
                .style("fill", "#CDCDCD")
                .style("stroke", "#CDCDCD")
                .style("fill-opacity", 0.1);

            // Draw the axes
            const axis = g.selectAll(".axis")
                .data(data[0].axes)
                .enter()
                .append("g")
                .attr("class", "axis");

            axis.append("line")
                .attr("x1", 0)
                .attr("y1", 0)
                .attr("x2", (d, i) => rScale(1.1) * Math.cos(angleSlice * i - Math.PI / 2))
                .attr("y2", (d, i) => rScale(1.1) * Math.sin(angleSlice * i - Math.PI / 2))
                .attr("class", "line")
                .style("stroke", "white")
                .style("stroke-width", "2px");

            axis.append("text")
                .attr("class", "legend")
                .style("font-size", "11px")
                .attr("text-anchor", "middle")
                .attr("dy", "0.35em")
                .attr("x", (d, i) => rScale(1.2) * Math.cos(angleSlice * i - Math.PI / 2))
                .attr("y", (d, i) => rScale(1.2) * Math.sin(angleSlice * i - Math.PI / 2))
                .text(d => d.axis)
                .call(wrap, 60);

            // Draw the radar chart blobs
            const radarLine = d3.lineRadial()
                .curve(d3.curveLinearClosed)
                .radius(d => rScale(d.value))
                .angle((d, i) => i * angleSlice);

            const blobWrapper = g.selectAll(".radarWrapper")
                .data(data)
                .enter().append("g")
                .attr("class", "radarWrapper");

            blobWrapper.append("path")
                .attr("class", "radarArea")
                .attr("d", d => radarLine(d.axes))
                .style("fill", (d, i) => options.colors[i])
                .style("fill-opacity", 0.1)
                .on('mouseover', function(event, d) {
                    d3.selectAll(".radarArea")
                        .transition().duration(200)
                        .style("fill-opacity", 0.1);
                    d3.select(this)
                        .transition().duration(200)
                        .style("fill-opacity", 0.7);
                })
                .on('mouseout', function() {
                    d3.selectAll(".radarArea")
                        .transition().duration(200)
                        .style("fill-opacity", 0.1);
                });

            blobWrapper.append("path")
                .attr("class", "radarStroke")
                .attr("d", d => radarLine(d.axes))
                .style("stroke-width", "2px")
                .style("stroke", (d, i) => options.colors[i])
                .style("fill", "none");

            // Append the circles
            blobWrapper.selectAll(".radarCircle")
                .data(d => d.axes)
                .enter()
                .append("circle")
                .attr("class", "radarCircle")
                .attr("r", 4)
                .attr("cx", (d, i) => rScale(d.value) * Math.cos(angleSlice * i - Math.PI / 2))
                .attr("cy", (d, i) => rScale(d.value) * Math.sin(angleSlice * i - Math.PI / 2))
                .style("fill", (d, i, j) => options.colors[j])
                .style("fill-opacity", 0.8);

            // Add chart title
            svg.append("text")
                .attr("x", width / 2)
                .attr("y", 20)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("fill", "#ffffff")
                .text(options.title);

            // Wrapping function for the text labels
            function wrap(text, width) {
                text.each(function() {
                    var text = d3.select(this),
                        words = text.text().split(/\s+/).reverse(),
                        word,
                        line = [],
                        lineNumber = 0,
                        lineHeight = 1.4,
                        y = text.attr("y"),
                        x = text.attr("x"),
                        dy = parseFloat(text.attr("dy")),
                        tspan = text.text(null).append("tspan").attr("x", x).attr("y", y).attr("dy", dy + "em");
                    while (word = words.pop()) {
                        line.push(word);
                        tspan.text(line.join(" "));
                        if (tspan.node().getComputedTextLength() > width) {
                            line.pop();
                            tspan.text(line.join(" "));
                            line = [word];
                            tspan = text.append("tspan").attr("x", x).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
                        }
                    }
                });
            }

            // Add animations
            blobWrapper.selectAll("path")
                .style("opacity", 0)
                .transition()
                .duration(1000)
                .style("opacity", 1);

            blobWrapper.selectAll(".radarCircle")
                .style("opacity", 0)
                .transition()
                .delay((d, i) => i * 50)
                .duration(500)
                .style("opacity", 0.8);
        }

        function createStackedAreaChart(svg, data, options) {
            const margin = {top: 20, right: 30, bottom: 40, left: 60};
            const width = svg.node().getBoundingClientRect().width - margin.left - margin.right;
                        const height = svg.node().getBoundingClientRect().height - margin.top - margin.bottom;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            const x = d3.scaleTime()
                .range([0, width]);

            const y = d3.scaleLinear()
                .range([height, 0]);

            const color = d3.scaleOrdinal(d3.schemeCategory10);

            const area = d3.area()
                .x(d => x(d.data.date))
                .y0(d => y(d[0]))
                .y1(d => y(d[1]));

            const stack = d3.stack()
                .keys(data.columns.slice(1));

            x.domain(d3.extent(data, d => d.date));
            y.domain([0, d3.max(data, d => d.total)]);

            const layer = g.selectAll(".layer")
                .data(stack(data))
                .enter().append("g")
                .attr("class", "layer");

            layer.append("path")
                .attr("class", "area")
                .style("fill", (d, i) => color(i))
                .attr("d", area);

            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x));

            g.append("g")
                .call(d3.axisLeft(y));

            // Add chart title
            svg.append("text")
                .attr("x", width / 2 + margin.left)
                .attr("y", margin.top / 2)
                .attr("text-anchor", "middle")
                .style("font-size", "16px")
                .style("fill", "#ffffff")
                .text(options.title);

            // Add animations
            layer.selectAll("path")
                .attr("opacity", 0)
                .transition()
                .duration(1000)
                .attr("opacity", 1);

            // Add interactivity
            layer.selectAll("path")
                .on("mouseover", function(event, d) {
                    d3.select(this).attr("opacity", 0.8);
                    showTooltip(event, `${d.key}: ${d3.sum(d, dd => dd[1] - dd[0])}`);
                })
                .on("mouseout", function() {
                    d3.select(this).attr("opacity", 1);
                    hideTooltip();
                });
        }

        function showTooltip(event, text) {
            const tooltip = d3.select("#tooltip");
            tooltip.style("opacity", 1)
                .html(text)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 10) + "px");
        }

        function hideTooltip() {
            d3.select("#tooltip").style("opacity", 0);
        }

        function createCharts() {
            // Saudi vs Malaysia Projects
            createChart("saudi-malaysia-chart", "bar", [
                {label: "NEOM", value: 500},
                {label: "Forest City", value: 100},
                {label: "Bandar Malaysia", value: 33},
                {label: "TRX", value: 10}
            ], {title: "Project Investment (Billion USD)", color: "#00ffff"});

            // NEOM vs UAE Projects
            createChart("neom-uae-chart", "bar", [
                {label: "NEOM", value: 500},
                {label: "Dubai Creek Harbour", value: 20},
                {label: "Yas Island", value: 40},
                {label: "Saadiyat Island", value: 27}
            ], {title: "Project Investment (Billion USD)", color: "#ff00ff"});

            // Investment Timeline
            createChart("investment-timeline-chart", "line", [
                {date: new Date(2020, 0, 1), value: 10},
                {date: new Date(2022, 0, 1), value: 50},
                {date: new Date(2024, 0, 1), value: 150},
                {date: new Date(2026, 0, 1), value: 300},
                {date: new Date(2028, 0, 1), value: 450},
                {date: new Date(2030, 0, 1), value: 500}
            ], {title: "Cumulative Investment (Billion USD)", color: "#00ff00"});

            // Job Creation Forecast
            createChart("job-creation-chart", "line", [
                {date: new Date(2025, 0, 1), value: 50000},
                {date: new Date(2026, 0, 1), value: 100000},
                {date: new Date(2027, 0, 1), value: 180000},
                {date: new Date(2028, 0, 1), value: 280000},
                {date: new Date(2029, 0, 1), value: 380000},
                {date: new Date(2030, 0, 1), value: 500000}
            ], {title: "Jobs Created", color: "#ff8c00"});

            // Tourism Growth
            createChart("tourism-growth-chart", "line", [
                {date: new Date(2025, 0, 1), value: 1},
                {date: new Date(2026, 0, 1), value: 2},
                {date: new Date(2027, 0, 1), value: 4},
                {date: new Date(2028, 0, 1), value: 7},
                {date: new Date(2029, 0, 1), value: 11},
                {date: new Date(2030, 0, 1), value: 15}
            ], {title: "Annual Visitors (Millions)", color: "#4169e1"});

            // Renewable Energy Adoption
            createChart("renewable-energy-chart", "line", [
                {date: new Date(2025, 0, 1), value: 20},
                {date: new Date(2026, 0, 1), value: 35},
                {date: new Date(2027, 0, 1), value: 50},
                {date: new Date(2028, 0, 1), value: 70},
                {date: new Date(2029, 0, 1), value: 85},
                {date: new Date(2030, 0, 1), value: 100}
            ], {title: "Renewable Energy Share (%)", color: "#32cd32"});

            // Foreign Direct Investment
            createChart("fdi-chart", "bar", [
                {label: "2025", value: 5},
                {label: "2026", value: 8},
                {label: "2027", value: 12},
                {label: "2028", value: 18},
                {label: "2029", value: 25},
                {label: "2030", value: 35}
            ], {title: "FDI Inflows (Billion USD)", color: "#daa520"});

            // Economic Diversification
            createChart("diversification-chart", "stacked", [
                {date: new Date(2020, 0, 1), Oil: 70, Tourism: 5, Technology: 10, Manufacturing: 15},
                {date: new Date(2022, 0, 1), Oil: 65, Tourism: 8, Technology: 12, Manufacturing: 15},
                {date: new Date(2024, 0, 1), Oil: 60, Tourism: 10, Technology: 15, Manufacturing: 15},
                {date: new Date(2026, 0, 1), Oil: 55, Tourism: 12, Technology: 18, Manufacturing: 15},
                {date: new Date(2028, 0, 1), Oil: 50, Tourism: 15, Technology: 20, Manufacturing: 15},
                {date: new Date(2030, 0, 1), Oil: 45, Tourism: 18, Technology: 22, Manufacturing: 15}
            ], {title: "Economic Sector Contribution (%)"});

            // NEOM vs Other Megaprojects
            createChart("megaprojects-comparison-chart", "bar", [
                {label: "NEOM", value: 500},
                {label: "Songdo IBD", value: 40},
                {label: "Masdar City", value: 22},
                {label: "King Abdullah Economic City", value: 100}
            ], {title: "Project Cost (Billion USD)", color: "#ba55d3"});

            // Smart City Index
            createChart("smart-city-chart", "radar", [
                {
                    name: "NEOM",
                    axes: [
                        {axis: "Technology", value: 9.5},
                        {axis: "Sustainability", value: 9.8},
                        {axis: "Governance", value: 8.5},
                        {axis: "Mobility", value: 9.2},
                        {axis: "Living", value: 9.0},
                        {axis: "Economy", value: 9.3}
                    ]
                },
                {
                    name: "Global Average",
                    axes: [
                        {axis: "Technology", value: 7.0},
                        {axis: "Sustainability", value: 6.5},
                        {axis: "Governance", value: 6.8},
                        {axis: "Mobility", value: 7.2},
                        {axis: "Living", value: 7.5},
                        {axis: "Economy", value: 7.0}
                    ]
                }
            ], {title: "Smart City Index", colors: ["#00ffff", "#ff00ff"]});

            // NEOM Regions Comparison
            createChart("neom-regions-chart", "pie", [
                {label: "The Line", value: 40},
                {label: "Oxagon", value: 30},
                {label: "Trojena", value: 20},
                {label: "Sindalah", value: 5},
                {label: "Magna", value: 5}
            ], {title: "NEOM Regions Distribution"});
        }

        function setupQuiz() {
            const quizData = [
                {
                    question: "What is the estimated cost of the NEOM project?",
                    options: ["$100 billion", "$300 billion", "$500 billion", "$700 billion"],
                    correct: 2
                },
                {
                    question: "By which year is NEOM expected to be fully operational?",
                    options: ["2025", "2030", "2035", "2040"],
                    correct: 1
                },
                {
                    question: "Which of the following is NOT a part of NEOM?",
                    options: ["The Line", "Oxagon", "Trojena", "Palm Jumeirah"],
                    correct: 3
                },
                {
                    question: "What percentage of NEOM's energy is planned to come from renewable sources?",
                    options: ["50%", "75%", "90%", "100%"],
                    correct: 3
                },
                {
                    question: "How many square kilometers is NEOM expected to cover?",
                    options: ["10,000", "26,500", "50,000", "100,000"],
                    correct: 1
                }
            ];

            let currentQuestion = 0;

            function loadQuestion() {
                const questionElement = document.getElementById("quiz-question");
                const optionsElement = document.getElementById("quiz-options");

                questionElement.textContent = quizData[currentQuestion].question;
                optionsElement.innerHTML = "";

                quizData[currentQuestion].options.forEach((option, index) => {
                    const button = document.createElement("button");
                    button.textContent = option;
                    button.classList.add("quiz-option");
                    button.addEventListener("click", () => checkAnswer(index));
                    optionsElement.appendChild(button);
                });
            }

            function checkAnswer(selectedIndex) {
                const correctIndex = quizData[currentQuestion].correct;
                const options = document.querySelectorAll(".quiz-option");

                options.forEach((option, index) => {
                    if (index === correctIndex) {
                        option.style.backgroundColor = "#00ff00";
                    } else if (index === selectedIndex) {
                        option.style.backgroundColor = "#ff0000";
                    }
                    option.disabled = true;
                });

                setTimeout(() => {
                    currentQuestion++;
                    if (currentQuestion < quizData.length) {
                        loadQuestion();
                    } else {
                        document.getElementById("quiz-question").textContent = "Quiz completed!";
                        document.getElementById("quiz-options").innerHTML = "";
                    }
                }, 2000);
            }

            loadQuestion();
        }

        function createTimeline() {
            const timelineData = [
                {year: 2017, event: "NEOM announced"},
                {year: 2019, event: "NEOM Bay Airport opened"},
                {year: 2020, event: "The Line unveiled"},
                {year: 2021, event: "Oxagon industrial city announced"},
                {year: 2022, event: "Trojena mountain resort revealed"},
                {year: 2025, event: "First NEOM zone to be completed"},
                {year: 2030, event: "NEOM fully operational"}
            ];

            const timeline = d3.select("#neom-timeline");
            const width = timeline.node().getBoundingClientRect().width;

            const x = d3.scaleLinear()
                .domain([2017, 2030])
                .range([0, width]);

            timelineData.forEach(d => {
                const event = timeline.append("div")
                    .attr("class", "timeline-event")
                    .style("left", `${x(d.year)}px`)
                    .style("top", "50%")
                    .on("mouseover", function(event) {
                        const tooltip = timeline.append("div")
                            .attr("class", "timeline-tooltip")
                            .style("left", `${x(d.year)}px`)
                            .style("top", "0")
                            .text(`${d.year}: ${d.event}`);
                        tooltip.style("opacity", 1);
                    })
                    .on("mouseout", function() {
                        timeline.select(".timeline-tooltip").remove();
                    });
            });
        }

        function toggleMode() {
            document.body.classList.toggle("dark-mode");
        }

        function animateNumbers() {
            const numbers = document.querySelectorAll(".animate-number");
            numbers.forEach(number => {
                const target = parseInt(number.getAttribute("data-target"));
                const duration = 2000;
                const step = target / (duration / 16);
                let current = 0;

                const timer = setInterval(() => {
                    current += step;
                    number.textContent = Math.round(current);
                    if (current >= target) {
                        clearInterval(timer);
                        number.textContent = target;
                    }
                }, 16);
            });
        }

        function createInteractiveMap() {
            const mapContainer = d3.select("#neom-map");
            const width = mapContainer.node().getBoundingClientRect().width;
            const height = 400;

            const svg = mapContainer.append("svg")
                                .attr("width", width)
                .attr("height", height);

            // Add a background image for the map
            svg.append("image")
                .attr("xlink:href", "https://www.neom.com/content/dam/neom/images/maps/neom-map.png") // Placeholder for NEOM map
                .attr("width", width)
                .attr("height", height);

            // Define locations for NEOM projects
            const locations = [
                { name: "The Line", coordinates: [35.0, 28.0] },
                { name: "Oxagon", coordinates: [35.1, 28.1] },
                { name: "Trojena", coordinates: [35.2, 28.2] },
                { name: "Sindalah", coordinates: [35.3, 28.3] },
                { name: "Magna", coordinates: [35.4, 28.4] }
            ];

            // Add markers for each project
            locations.forEach(location => {
                const [lng, lat] = location.coordinates;
                const marker = svg.append("circle")
                    .attr("cx", (lng - 34.0) * 1000) // Adjust scaling for map coordinates
                    .attr("cy", (28.5 - lat) * 1000) // Adjust scaling for map coordinates
                    .attr("r", 5)
                    .attr("fill", "#00ffff")
                    .attr("class", "map-marker")
                    .on("mouseover", function(event) {
                        showTooltip(event, location.name);
                    })
                    .on("mouseout", hideTooltip);
            });

            // Add an event listener for resizing the map
            window.addEventListener('resize', () => {
                svg.attr("width", mapContainer.node().getBoundingClientRect().width)
                   .attr("height", height);
            });
        }

        // Initialize all components
        function initializeAllComponents() {
            createComparisonChart();
            createSectorsChart();
            createTimelineChart();
            createJobsChart();
            createTourismChart();
            createEnergyChart();
            createSmartCityChart();
            createDiversificationChart();
            createFDIChart();
            createRadarChart();
            createStackedAreaChart();
            createInteractiveMap();
            createDynamicPieChart();
            createForceDirectedGraph();
            createInteractiveTreemap();
            addShootingStars();
            addParticles();
            addBackgroundAnimation();
            addFloatingActionButton();
            addQuiz();
            addScrollProgressBar();
            addDayNightCycle();
            addWordCloud();
            addNewsTicker();
            addInteractiveDataPoints();
            addVision2030ProgressBar();
            addTimeline();
            addDynamicBackground();
            addPulsatingEffect();
            addSocialSharing();
            addChatbot();
            add3DGlobe();
            addFloatingLogo();
            addInteractiveTimeline();
            addScrollTriggeredAnimations();
        }

        // Call the initialization function
        window.addEventListener('load', () => {
            initializeAllComponents();
        });

        // Ensure everything works
        function ensureEverythingWorks() {
            // Check for console errors
            console.log("Initialization complete. Check for any console errors.");
        }

        // Call the function to ensure everything works
        ensureEverythingWorks();

    </script>
</body>
</html>
