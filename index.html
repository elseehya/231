<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEOM Economy Facts - Ultra Animated</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(45deg, #001f3f, #003366, #0066cc, #0099ff);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .button {
            background-color: #003366;
            color: #ffffff;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .button:hover {
            background-color: #004080;
            transform: scale(1.05);
        }

        .fact {
            display: none;
            font-size: 24px;
            margin-top: 30px;
            text-align: center;
            max-width: 80%;
        }

        .icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: #ffffff;
        }

        .chart {
            width: 300px;
            height: 200px;
            margin: 20px auto;
            display: none;
        }

        .cursor-trail {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            pointer-events: none;
            transform: translate(-50%, -50%);
        }

        @keyframes shootingStar {
            0% { transform: translateX(-100px) translateY(100px); opacity: 1; }
            100% { transform: translateX(300px) translateY(-300px); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="button" onclick="showFact()">Click for an interesting fact!</button>
        <div id="icon" class="icon"></div>
        <div id="fact" class="fact"></div>
        <svg class="chart" id="chart"></svg>
    </div>

    <script>
        const facts = [
            "NEOM is expected to contribute $48 billion to Saudi Arabia's GDP by 2030.",
            "The project aims to create over 380,000 jobs by 2030.",
            "NEOM plans to be powered by 100% renewable energy.",
            "The Line, a key component of NEOM, will be a 170km long linear city.",
            "NEOM's economy will focus on 16 key economic sectors.",
            "The project has a total planned area of 26,500 km².",
            "NEOM aims to attract more than 1 million residents by 2030.",
            "The city plans to have fully automated services and processes.",
            "NEOM will feature flying taxis and robot maids.",
            "The project includes plans for a giant artificial moon."
            // ... Add more facts here to reach 100
        ];

        const icons = [
            "💼", "🏗️", "🌞", "🏙️", "📊", "🗺️", "👥", "🤖", "🚁", "🌙"
            // ... Add more icons here to match the number of facts
        ];

        let currentFactIndex = -1;

        function showFact() {
            const button = document.querySelector('.button');
            const factElement = document.getElementById('fact');
            const iconElement = document.getElementById('icon');
            const chartElement = document.getElementById('chart');

            gsap.to(button, {duration: 0.5, rotation: 360, opacity: 0, onComplete: () => {
                button.style.display = 'none';
                
                currentFactIndex = (currentFactIndex + 1) % facts.length;
                const fact = facts[currentFactIndex];
                const icon = icons[currentFactIndex];

                iconElement.innerHTML = icon;
                iconElement.style.display = 'block';
                factElement.style.display = 'block';

                gsap.from(iconElement, {duration: 0.5, scale: 0, ease: "back.out(1.7)"});
                
                typewriterEffect(factElement, fact);

                createFireworks();
                createConfetti();

                if (Math.random() < 0.3) {
                    showChart();
                } else {
                    chartElement.style.display = 'none';
                }

                setTimeout(() => {
                    button.style.display = 'block';
                    gsap.to(button, {duration: 0.5, rotation: 0, opacity: 1});
                }, 5000);
            }});
        }

        function typewriterEffect(element, text, speed = 50) {
            let i = 0;
            element.innerHTML = '';
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        function createFireworks() {
            for (let i = 0; i < 50; i++) {
                const firework = document.createElement('div');
                firework.classList.add('star');
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                document.body.appendChild(firework);

                gsap.to(firework, {
                    duration: 1 + Math.random(),
                    x: (Math.random() - 0.5) * 200,
                    y: (Math.random() - 0.5) * 200,
                    opacity: 0,
                    scale: 0,
                    ease: 'power2.out',
                    onComplete: () => firework.remove()
                });
            }
        }

        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('star');
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = '-5%';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                document.body.appendChild(confetti);

                gsap.to(confetti, {
                    duration: 2 + Math.random() * 2,
                    y: '105%',
                    rotation: Math.random() * 360,
                    ease: 'power1.out',
                    onComplete: () => confetti.remove()
                });
            }
        }

        function showChart() {
            const chartElement = document.getElementById('chart');
            chartElement.style.display = 'block';
            chartElement.innerHTML = '';

            const data = [
                {label: 'Renewable Energy', value: 100},
                {label: 'AI & Robotics', value: 85},
                {label: 'Biotechnology', value: 70},
                {label: 'Tourism', value: 60},
                {label: 'Advanced Manufacturing', value: 55}
            ];

            const margin = {top: 20, right: 20, bottom: 30, left: 40};
            const width = 300 - margin.left - margin.right;
            const height = 200 - margin.top - margin.bottom;

            const svg = d3.select('#chart')
                .attr('width', width + margin.left + margin.right)
                .attr('height', height + margin.top + margin.bottom)
                .append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand()
                .range([0, width])
                .padding(0.1);

            const y = d3.scaleLinear()
                .range([height, 0]);

            x.domain(data.map(d => d.label));
            y.domain([0, d3.max(data, d => d.value)]);

            svg.selectAll('.bar')
                .data(data)
                .enter().append('rect')
                .attr('class', 'bar')
                .attr('x', d => x(d.label))
                .attr('width', x.bandwidth())
                .attr('y', height)
                .attr('height', 0)
                .transition()
                .duration(1000)
                .attr('y', d => y(d.value))
                .attr('height', d => height - y(d.value))
                .attr('fill', '#4CAF50');

            svg.append('g')
                .attr('transform', `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('transform', 'rotate(-45)')
                .style('text-anchor', 'end');

            svg.append('g')
                .call(d3.axisLeft(y));
        }

        function createShootingStar() {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            document.body.appendChild(star);

            gsap.to(star, {
                duration: 1 + Math.random(),
                x: 300,
                y: -300,
                opacity: 0,
                ease: 'none',
                onComplete: () => star.remove()
            });
        }

        setInterval(createShootingStar, 1000);

        document.addEventListener('mousemove', (e) => {
            const trail = document.createElement('div');
            trail.classList.add('cursor-trail');
            trail.style.left = `${e.clientX}px`;
            trail.style.top = `${e.clientY}px`;
            document.body.appendChild(trail);

            gsap.to(trail, {
                duration: 1,
                opacity: 0,
                scale: 0,
                ease: 'power2.out',
                onComplete: () => trail.remove()
            });
        });

        gsap.to('.button', {
            duration: 1,
            scale: 1.1,
            repeat: -1,
            yoyo: true,
            ease: 'power1.inOut'
        });

        window.addEventListener('resize', () => {
            // Add responsive design logic here
        });
    </script>
</body>
</html>
